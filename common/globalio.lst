   1               		.file	"globalio.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               	.global	GlobalIOInit
  12               	GlobalIOInit:
  13               	.LFB8:
  14               		.file 1 "common/globalio.c"
   1:common/globalio.c **** /*
   2:common/globalio.c **** 	globalio.h	: Global I/O definitions. dip switthches / joystick etc.
   3:common/globalio.c **** 	
   4:common/globalio.c **** 	2021-01-23, P.Harvey-Smith.
   5:common/globalio.c **** */
   6:common/globalio.c **** 
   7:common/globalio.c **** #include <inttypes.h>
   8:common/globalio.c **** #include "globalio.h"
   9:common/globalio.c **** #include "status.h"
  10:common/globalio.c **** 
  11:common/globalio.c **** void GlobalIOInit(void)
  12:common/globalio.c **** {
  15               		.loc 1 12 0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
  13:common/globalio.c **** 	logv0("GlobalIOInit()\n");
  21               		.loc 1 13 0
  22 0000 8091 0000 		lds r24,STATUS_VERBOSE
  23 0004 8823      		tst r24
  24 0006 01F0      		breq .L2
  25               		.loc 1 13 0 is_stmt 0 discriminator 1
  26 0008 80E0      		ldi r24,lo8(__c.2127)
  27 000a 90E0      		ldi r25,hi8(__c.2127)
  28 000c 9F93      		push r25
  29               	.LCFI0:
  30               		.cfi_def_cfa_offset 3
  31 000e 8F93      		push r24
  32               	.LCFI1:
  33               		.cfi_def_cfa_offset 4
  34 0010 80E0      		ldi r24,lo8(ser0stream)
  35 0012 90E0      		ldi r25,hi8(ser0stream)
  36 0014 9F93      		push r25
  37               	.LCFI2:
  38               		.cfi_def_cfa_offset 5
  39 0016 8F93      		push r24
  40               	.LCFI3:
  41               		.cfi_def_cfa_offset 6
  42 0018 0E94 0000 		call fprintf_P
  43               	.LVL0:
  44 001c 0F90      		pop __tmp_reg__
  45 001e 0F90      		pop __tmp_reg__
  46 0020 0F90      		pop __tmp_reg__
  47 0022 0F90      		pop __tmp_reg__
  48               	.LCFI4:
  49               		.cfi_def_cfa_offset 2
  50               	.L2:
  14:common/globalio.c **** 	
  15:common/globalio.c **** 	// Init DIPs/Jumpers, inputs with pullups
  16:common/globalio.c **** 	DIPDDR 	&= ~DIPMASK;
  51               		.loc 1 16 0 is_stmt 1
  52 0024 84B1      		in r24,0x4
  53 0026 807E      		andi r24,lo8(-32)
  54 0028 84B9      		out 0x4,r24
  17:common/globalio.c **** 	DIPPORT |= DIPMASK;
  55               		.loc 1 17 0
  56 002a 85B1      		in r24,0x5
  57 002c 8F61      		ori r24,lo8(31)
  58 002e 85B9      		out 0x5,r24
  18:common/globalio.c **** 	
  19:common/globalio.c **** 	// Init Joystick, inputs with pullups
  20:common/globalio.c **** 	JSDDR	&= ~JSINMASK;
  59               		.loc 1 20 0
  60 0030 87B1      		in r24,0x7
  61 0032 807E      		andi r24,lo8(-32)
  62 0034 87B9      		out 0x7,r24
  21:common/globalio.c **** 	JSPORT	|= JSINMASK;
  63               		.loc 1 21 0
  64 0036 88B1      		in r24,0x8
  65 0038 8F61      		ori r24,lo8(31)
  66 003a 88B9      		out 0x8,r24
  22:common/globalio.c **** 	
  23:common/globalio.c **** 	// Init AUX with just inputs no pullups.
  24:common/globalio.c **** 	JSDDR	&= ~AUXMASK;
  67               		.loc 1 24 0
  68 003c 87B1      		in r24,0x7
  69 003e 8F79      		andi r24,lo8(-97)
  70 0040 87B9      		out 0x7,r24
  25:common/globalio.c **** 	
  26:common/globalio.c **** 	// Init JS prog LED, and turn it off
  27:common/globalio.c **** 	JSDDR	|= JSPROGLED;
  71               		.loc 1 27 0
  72 0042 3F9A      		sbi 0x7,7
  28:common/globalio.c **** 	JSLEDOff();
  73               		.loc 1 28 0
  74 0044 479A      		sbi 0x8,7
  29:common/globalio.c **** 	
  30:common/globalio.c **** 	// Init target machine reset, input with pullup
  31:common/globalio.c **** 	ClearTargetReset();
  75               		.loc 1 31 0
  76 0046 5398      		cbi 0xa,3
  77 0048 5B9A      		sbi 0xb,3
  78 004a 0895      		ret
  79               		.cfi_endproc
  80               	.LFE8:
  82               		.section	.progmem.data,"a",@progbits
  85               	__c.2127:
  86 0000 476C 6F62 		.string	"GlobalIOInit()\n"
  86      616C 494F 
  86      496E 6974 
  86      2829 0A00 
  87               		.text
  88               	.Letext0:
  89               		.file 2 "d:\\winavr\\avr\\include\\stdio.h"
  90               		.file 3 "d:\\winavr\\avr\\include\\stdint.h"
  91               		.file 4 "common/status.h"
DEFINED SYMBOLS
                            *ABS*:00000000 globalio.c
D:\cygwin64\tmp\cci9Yo8Y.s:2      *ABS*:0000003e __SP_H__
D:\cygwin64\tmp\cci9Yo8Y.s:3      *ABS*:0000003d __SP_L__
D:\cygwin64\tmp\cci9Yo8Y.s:4      *ABS*:0000003f __SREG__
D:\cygwin64\tmp\cci9Yo8Y.s:5      *ABS*:00000000 __tmp_reg__
D:\cygwin64\tmp\cci9Yo8Y.s:6      *ABS*:00000001 __zero_reg__
D:\cygwin64\tmp\cci9Yo8Y.s:12     .text:00000000 GlobalIOInit
D:\cygwin64\tmp\cci9Yo8Y.s:85     .progmem.data:00000000 __c.2127

UNDEFINED SYMBOLS
STATUS_VERBOSE
ser0stream
fprintf_P
